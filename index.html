<!-- https://gemlou0033.github.io/interactionnotes/ -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BT/EE HomeTech Interaction Note Helper</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Raleway', sans-serif;
      margin: 20px;
      transition: all 0.3s ease;
    }

    /* Theme styles */
    body.ee-theme {
      background-color: white;
      color: #003F2D;
    }

    body.ee-theme textarea,
    body.ee-theme input[type="text"] {
      border: 2px solid #019ba5;
      background-color: #ffffff;
    }

    body.ee-theme button {
      background-color: #019ba5;
      color: white;
      border: none;
    }

    body.ee-theme .quick-link {
      background-color: #019ba5;
      color: white;
      border: 1px solid #017a82;
    }

    body.ee-theme .quick-link:hover {
      background-color: #017a82;
    }

    body.ee-theme fieldset {
      border: 2px solid #edf33b;
    }

    body.bt-theme {
      background-color: white;
      color: #2E004F;
    }

    body.bt-theme textarea,
    body.bt-theme input[type="text"] {
      border: 2px solid #5614b4;
      background-color: #ffffff;
    }

    body.bt-theme button {
      background-color: #5614b4;
      color: white;
      border: none;
    }

    body.bt-theme .quick-link {
      background-color: #5614b4;
      color: white;
      border: 1px solid #441096;
    }

    body.bt-theme .quick-link:hover {
      background-color: #441096;
    }

    body.bt-theme fieldset {
      border: 2px solid #ff64fe;
    }

    .container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .main {
      flex: 1;
      min-width: 300px;
    }

    .extra {
      width: 350px;
    }

    textarea,
    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      font-size: 16px;
      box-sizing: border-box;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      margin-right: 10px;
      box-sizing: border-box;
    }

    .quick-links-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin: 10px 0;
    }

    .quick-link {
      padding: 8px 12px;
      font-size: 13px;
      text-decoration: none;
      border-radius: 4px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
      display: block;
      font-weight: 500;
    }

    .quick-link:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    #output {
      white-space: pre-wrap;
      background: #f5f5f5;
      padding: 10px;
      border: 1px solid #ccc;
      margin-top: 20px;
      min-height: 100px;
    }

    label {
      font-weight: bold;
    }

    .checkin-row,
    .validation-row,
    .complaint-row,
    .initials-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    input[type="radio"],
    input[type="checkbox"] {
      width: 22px;
      height: 22px;
      cursor: pointer;
      vertical-align: middle;
      margin-right: 6px;
    }

    .checkin-row input[type="text"] {
      flex: 1;
    }

    .initials-row input[type="text"] {
      width: 60px;
      flex: none;
    }

    .button-row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .reminder-row {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }

    .reminder-label {
      display: inline-block;
      width: 80px;
      font-weight: bold;
      margin-right: 24px;
    }

    .reminder-sub-label {
      display: inline-block;
      width: 50px;
      margin-right: 6px;
    }

    select {
      padding: 5px;
      font-size: 16px;
      margin-left: 10px;
    }

    .formatted-notes {
      margin-top: 20px;
    }

    .formatted-notes h3 {
      margin-bottom: 10px;
    }

    .validation-guide,
    .shortcuts-guide {
      margin-top: 15px;
      margin-bottom: 15px;
      background: white;
      border: 2px solid #019ba5;
      border-radius: 8px;
      padding: 15px;
      display: none;
      position: relative;
    }

    body.bt-theme .validation-guide,
    body.bt-theme .shortcuts-guide {
      border-color: #5614b4;
    }

    .validation-guide h3,
    .shortcuts-guide h3 {
      margin-top: 0;
      margin-bottom: 15px;
      color: #019ba5;
      font-size: 18px;
    }

    body.bt-theme .validation-guide h3,
    body.bt-theme .shortcuts-guide h3 {
      color: #5614b4;
    }

    .validation-section {
      margin-bottom: 15px;
      padding: 12px;
      background-color: #f8f9fa;
      border-radius: 6px;
      border-left: 3px solid #019ba5;
    }

    body.bt-theme .validation-section {
      border-left-color: #5614b4;
    }

    .validation-section:last-child {
      margin-bottom: 0;
    }

    .validation-section h4 {
      margin: 0 0 8px 0;
      color: #333;
      font-size: 14px;
      font-weight: bold;
    }

    .validation-section ul {
      margin: 0;
      padding-left: 18px;
    }

    .validation-section li {
      margin-bottom: 4px;
      font-size: 13px;
    }

    .shortcuts-list {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin: 10px 0;
    }

    .shortcut-item {
      display: flex;
      align-items: center;
      padding: 8px;
      background-color: #f8f9fa;
      border-radius: 4px;
      border-left: 3px solid #019ba5;
      font-size: 13px;
    }

    body.bt-theme .shortcut-item {
      border-left-color: #5614b4;
    }

    .shortcut-key {
      font-weight: bold;
      color: #019ba5;
      margin-right: 8px;
      min-width: 40px;
    }

    body.bt-theme .shortcut-key {
      color: #5614b4;
    }

    .shortcut-value {
      color: #333;
    }

    .close-guide {
      position: absolute;
      top: 8px;
      right: 12px;
      background: none;
      border: none;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
      color: #666;
      width: 25px;
      height: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .close-guide:hover {
      color: #333;
      background-color: #f0f0f0;
    }
  </style>
</head>
<body class="ee-theme">

  <h2>BT/EE HomeTech Interaction Note Helper</h2>

  <!-- Theme selector -->
  <div style="margin-bottom: 15px;">
    <label for="themeSelect"><strong>Theme:</strong></label>
    <select id="themeSelect">
      <option value="ee" selected>EE</option>
      <option value="bt">BT</option>
    </select>
  </div>

  <!-- Initials Row -->
  <div class="initials-row">
    <label for="initials">Initials:</label>
    <input type="text" id="initials" maxlength="5">
    <button onclick="clearAll()" style="margin-left: 60px; transform: translateY(-8px);">CLEAR</button>
  </div>

  <!-- Validation Row -->
  <div class="validation-row">
    <label>Validation:</label>
    <input type="radio" name="validation" id="valNone">
    <label for="valNone">None</label>
    <input type="radio" name="validation" id="valThirdParty">
    <label for="valThirdParty">Third Party</label>
    <input type="radio" name="validation" id="valAccountHolder">
    <label for="valAccountHolder">Account Holder</label>
  </div>

  <!-- Third Party Name Input (hidden by default) -->
  <div id="thirdPartyRow" class="validation-row" style="display: none; margin-top: -10px; margin-left: 20px;">
    <label for="thirdPartyName">Name:</label>
    <input type="text" id="thirdPartyName" placeholder="Optional" style="width: 200px;">
  </div>

  <div class="container">
    <!-- Left side (Main form) -->
    <div class="main">
      <label for="issue">Issue:</label>
      <textarea id="issue" rows="3"></textarea>

      <label for="actions">Actions:</label>
      <textarea id="actions" rows="3"></textarea>

      <label for="next">Next Actions:</label>
      <textarea id="next" rows="3" placeholder="Check if issue resolved"></textarea>

      <div class="checkin-row">
        <input type="checkbox" id="checkin">
        <label for="checkin">#checkin</label>
        <input type="text" id="number" placeholder="Phone number">
      </div>

      <!-- Formatted Note section moved here -->
      <div class="formatted-notes">
        <h3>Formatted Note:</h3>
        <div id="output"></div>
        
        <!-- Shortcuts Button -->
        <button id="shortcutsButton" onclick="showShortcutsGuide()" style="margin-top: 10px;">SHORTCUTS</button>
        
        <!-- Shortcuts Guide Box -->
        <div class="shortcuts-guide" id="shortcutsGuide">
          <button class="close-guide" onclick="closeShortcutsGuide()">×</button>
          <h3>Shortcuts Reference</h3>
        
        <div class="shortcuts-list" id="shortcutsList">
          <!-- Shortcuts will be populated by JavaScript -->
        </div>
      </div>
      
      </div>
    </div>

    <!-- Right side (Extra info) -->
    <div class="extra">
      <label for="extra">Extra Info (not included in notes):</label>
      <textarea id="extra" rows="10" placeholder="Thank you for calling Home Tech in Newcastle. My name is __ and I will be your guide today. Can I start by taking your name please?"></textarea>

      <!-- Validation Guide Box - Now positioned above Quick Links -->
      <div class="validation-guide" id="validationGuide">
        <button class="close-guide" onclick="closeValidationGuide()">×</button>
        <h3>Validation Guide</h3>
        
        <div class="validation-section">
          <h4>Openreach Engineer</h4>
          <ul>
            <li><strong>EIN</strong></li>
            <li><strong>OUC</strong></li>
            <li><strong>Name</strong></li>
            <li><strong>Manager's Name</strong></li>
          </ul>
        </div>

        <div class="validation-section">
          <h4>Internal</h4>
          <ul>
            <li><strong>EIN</strong></li>
            <li><strong>Name</strong></li>
            <li><strong>Manager's Name</strong></li>
          </ul>
        </div>
      </div>

      <fieldset style="margin-top: 15px;">
        <legend><strong>Quick Links</strong></legend>
        <div class="quick-links-grid">
          <a href="broadband/index.html" target="_blank" rel="noopener noreferrer" class="quick-link">Broadband</a>
          <a href="tv/index.html" target="_blank" rel="noopener noreferrer" class="quick-link">TV</a>
          <a href="https://www.bt.com/content/dam/bt/help/digital-voice/essential-phone/BT-Essential-Digital-Home-Phone-UserGuide.pdf" target="_blank" class="quick-link">Digital Voice Manual</a>
          <a href="https://ee.co.uk/help/tv-sport/manage-use/channel-guide" target="_blank" class="quick-link">Channel Guide</a>
          <br>
          <a href="https://directory.intra.bt.com/" target="_blank" class="quick-link" id="directoryLink">Directory</a>
          <a href="https://info.btwifi.com/find/" target="_blank" class="quick-link">BT Hotspots</a>
          <a href="https://ee.co.uk/help/mobile-coverage-checker" target="_blank" class="quick-link">Mobile Coverage Checker</a>
          <a href="https://www.openreach.com/fibre-checker" target="_blank" class="quick-link">FTTP Checker</a>
          <a href="household/index.html" target="_blank" rel="noopener noreferrer" class="quick-link">Household Solutions</a>
        </div>
      </fieldset>

      <fieldset style="margin-top: 15px;">
        <legend><strong>Reminders</strong></legend>
        <div style="margin: 10px 0;">
          <div class="reminder-row">
            <span class="reminder-label">Bill paid</span>
            <input type="checkbox" id="billPaidCheckbox">
          </div>
          <div class="reminder-row">
            <span class="reminder-label">Fault</span>
            <span class="reminder-sub-label">Open</span>
            <input type="checkbox" id="faultOpenCheckbox">
            <span class="reminder-sub-label">Close</span>
            <input type="checkbox" id="faultCloseCheckbox">
          </div>
          <div class="reminder-row">
            <span class="reminder-label">Complaint</span>
            <span class="reminder-sub-label">Open</span>
            <input type="checkbox" id="complaintOpenCheckbox">
            <span class="reminder-sub-label">Close</span>
            <input type="checkbox" id="complaintCloseCheckbox">
          </div>
        </div>
      </fieldset>

      <fieldset style="margin-top: 15px;">
        <legend><strong>Order of Close</strong></legend>
        <ol style="margin: 10px 0; padding-left: 20px;">
          <li>Home View Door Button</li>
          <li>Albert Flow/Finished</li>
          <li>Consumer End Interaction with notes</li>
          <li>Advisor Hub/I'm All Done</li>
        </ol>
      </fieldset>
    </div>
  </div>

  <script>
    // Single source of truth for shortcuts - add new shortcuts here only!
    const shortcuts = {
      "adv": "advised",
      "ah": "account holder", 
      "appt": "appointment",
      "bb": "broadband",
      "bk": "booked",
      "cfg": "configured",
      "chk": "checked",
      "conn": "connection",
      "cust": "customer",
      "cx": "customer",
      "dv": "digital voice",
      "eng": "engineer",
      "escal": "escalated",
      "fr": "factory reset",
      "hc": "home checks completed",
      "hw": "hardware",
      "inhome": "in-home tech expert",
      "nfa": "no further action",
      "nw": "network",
      "pponr": "past the point of no return",
      "reb": "rebooted",
      "rep": "replaced",
      "res": "resolution",
      "rtr": "router",
      "sa": "smart assistant",
      "sip": "SIP regen completed",
      "sw": "software"
    };

    // Function to populate shortcuts display
    function populateShortcutsDisplay() {
      const shortcutsList = document.getElementById('shortcutsList');
      shortcutsList.innerHTML = '';
      
      Object.entries(shortcuts).forEach(([key, value]) => {
        const shortcutDiv = document.createElement('div');
        shortcutDiv.className = 'shortcut-item';
        shortcutDiv.innerHTML = `
          <span class="shortcut-key">${key}</span>
          <span class="shortcut-value">${value}</span>
        `;
        shortcutsList.appendChild(shortcutDiv);
      });
    }

    const actionsField = document.getElementById('actions');
    const nextField = document.getElementById('next');

    const fieldsToWatch = ['initials', 'issue', 'actions', 'next', 'number', 'thirdPartyName'];
    fieldsToWatch.forEach(id => {
      document.getElementById(id).addEventListener('input', updateFormattedNote);
    });

    document.getElementById('checkin').addEventListener('change', updateFormattedNote);
    
    // Fixed the validation event listeners
    document.getElementById('valNone').addEventListener('change', function() {
      updateValidationDisplay();
      updateFormattedNote();
    });
    
    document.getElementById('valThirdParty').addEventListener('change', function() {
      updateValidationDisplay();
      updateFormattedNote();
    });
    
    document.getElementById('valAccountHolder').addEventListener('change', function() {
      updateValidationDisplay();
      updateFormattedNote();
    });

    // Directory link click handler - Fixed!
    document.getElementById('directoryLink').addEventListener('click', function(e) {
      // The link will open in new tab normally, but we also want to show the validation guide
      setTimeout(() => {
        showValidationGuide();
      }, 100); // Small delay to ensure the new tab opens first
    });

    function showValidationGuide() {
      document.getElementById('validationGuide').style.display = 'block';
    }

    function closeValidationGuide() {
      document.getElementById('validationGuide').style.display = 'none';
    }

    function showShortcutsGuide() {
      document.getElementById('shortcutsButton').style.display = 'none';
      document.getElementById('shortcutsGuide').style.display = 'block';
    }

    function closeShortcutsGuide() {
      document.getElementById('shortcutsGuide').style.display = 'none';
      document.getElementById('shortcutsButton').style.display = 'inline-block';
    }

    function updateValidationDisplay() {
      const thirdPartyRow = document.getElementById('thirdPartyRow');
      if (document.getElementById('valThirdParty').checked) {
        thirdPartyRow.style.display = 'flex';
      } else {
        thirdPartyRow.style.display = 'none';
        document.getElementById('thirdPartyName').value = '';
      }
    }

    function expandShorthand(text) {
      return text.replace(/\b\w+\b/g, word => {
        const lower = word.toLowerCase();
        return shortcuts[lower] || word; // Now uses the shortcuts object directly
      });
    }

    function toSentenceCase(text) {
      return text.toLowerCase().replace(/(^\s*\w|[\.\!\?]\s*\w)/g, c => c.toUpperCase());
    }

    function getValidationLabel() {
      if (document.getElementById('valNone').checked) return "Did not pass security validation; general queries.";
      if (document.getElementById('valThirdParty').checked) {
        const thirdPartyName = document.getElementById('thirdPartyName').value.trim();
        return thirdPartyName ? `Spoke to third party: ${thirdPartyName}.` : "Spoke to third party.";
      }
      if (document.getElementById('valAccountHolder').checked) return "Spoke to account holder, highly validated.";
      return "";
    }

    function updateFormattedNote() {
      const initials = document.getElementById('initials').value.trim() || "GM";
      const rawIssue = document.getElementById('issue').value.trim();
      const rawActions = document.getElementById('actions').value.trim();
      const rawNext = document.getElementById('next').value.trim();

      if (!rawIssue) {
        document.getElementById('output').textContent = '';
        return;
      }

      const issueExpanded = expandShorthand(rawIssue);
      const actionsExpanded = expandShorthand(rawActions);
      const nextExpanded = rawNext || "Check if issue resolved";
      const nextExpandedShorthand = expandShorthand(nextExpanded);

      const issue = toSentenceCase(issueExpanded);
      const actions = toSentenceCase(actionsExpanded);
      const next = toSentenceCase(nextExpandedShorthand);

      const validationLabel = getValidationLabel();

      const checkinChecked = document.getElementById('checkin').checked;
      const number = document.getElementById('number').value.trim();

      let note = `${initials}@HomeTech`;
      if (validationLabel) {
        note += `\n${validationLabel}`;
      }
      note += `\nIssue - ${issue}`;
      if (actions) {
        note += `\nActions - ${actions}`;
      }
      note += `\nNext Actions - ${next}`;
      if (checkinChecked && number) {
        note += `\n#checkin #${number}`;
      }

      document.getElementById('output').textContent = note;
    }

    function clearAll() {
      document.getElementById('issue').value = '';
      actionsField.value = '';
      nextField.value = '';
      document.getElementById('extra').value = '';
      document.getElementById('checkin').checked = false;
      document.getElementById('number').value = '';
      document.getElementById('valNone').checked = false;
      document.getElementById('valThirdParty').checked = false;
      document.getElementById('valAccountHolder').checked = false;
      document.getElementById('thirdPartyName').value = '';
      document.getElementById('billPaidCheckbox').checked = false;
      document.getElementById('faultOpenCheckbox').checked = false;
      document.getElementById('faultCloseCheckbox').checked = false;
      document.getElementById('complaintOpenCheckbox').checked = false;
      document.getElementById('complaintCloseCheckbox').checked = false;
      updateValidationDisplay();
      updateFormattedNote();
    }

    document.getElementById('themeSelect').addEventListener('change', function () {
      const theme = this.value;
      document.body.classList.remove('bt-theme', 'ee-theme');
      document.body.classList.add(`${theme}-theme`);
    });

    // Initialize on page load
    window.addEventListener('DOMContentLoaded', () => {
      document.body.classList.add('ee-theme');
      populateShortcutsDisplay(); // Populate shortcuts on load
      updateFormattedNote();
    });
  </script>
</body>
</html>




