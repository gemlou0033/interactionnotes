<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BT/EE HomeTech Interaction Note Helper</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Raleway', sans-serif;
      margin: 20px;
      transition: all 0.3s ease;
    }

    /* Theme styles */
    body.ee-theme {
      background-color: white;
      color: #003F2D;
    }

    body.ee-theme textarea,
    body.ee-theme input[type="text"] {
      border: 2px solid #019ba5;
      background-color: #ffffff;
    }

    body.ee-theme button {
      background-color: #019ba5;
      color: white;
      border: none;
    }

    body.ee-theme fieldset {
      border: 2px solid #edf33b;
    }

    body.bt-theme {
      background-color: white;
      color: #2E004F;
    }

    body.bt-theme textarea,
    body.bt-theme input[type="text"] {
      border: 2px solid #5614b4;
      background-color: #ffffff;
    }

    body.bt-theme button {
      background-color: #5614b4;
      color: white;
      border: none;
    }

    body.bt-theme fieldset {
      border: 2px solid #ff64fe;
    }

    .container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .main {
      flex: 1;
      min-width: 300px;
    }

    .extra {
      width: 350px;
    }

    textarea,
    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      font-size: 16px;
      box-sizing: border-box;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      margin-right: 10px;
    }

    #output {
      white-space: pre-wrap;
      background: #f5f5f5;
      padding: 10px;
      border: 1px solid #ccc;
      margin-top: 20px;
      min-height: 100px;
    }

    label {
      font-weight: bold;
    }

    .checkin-row,
    .validation-row,
    .complaint-row,
    .initials-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    input[type="radio"],
    input[type="checkbox"] {
      width: 22px;
      height: 22px;
      cursor: pointer;
      vertical-align: middle;
      margin-right: 6px;
    }

    .checkin-row input[type="text"] {
      flex: 1;
    }

    .initials-row input[type="text"] {
      width: 60px;
      flex: none;
    }

    .button-row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .reminder-row {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }

    .reminder-label {
      display: inline-block;
      width: 80px;
      font-weight: bold;
      margin-right: 24px;
    }

    .reminder-sub-label {
      display: inline-block;
      width: 50px;
      margin-right: 6px;
    }

    select {
      padding: 5px;
      font-size: 16px;
      margin-left: 10px;
    }
  </style>
</head>
<body class="ee-theme">

  <h2>BT/EE HomeTech Interaction Note Helper</h2>

  <!-- Theme selector -->
  <div style="margin-bottom: 15px;">
    <label for="themeSelect"><strong>Theme:</strong></label>
    <select id="themeSelect">
      <option value="ee" selected>EE</option>
      <option value="bt">BT</option>
    </select>
  </div>

  <!-- Initials Row -->
  <div class="initials-row">
    <label for="initials">Initials:</label>
    <input type="text" id="initials" maxlength="5">
  </div>

  <!-- Validation Row -->
  <div class="validation-row">
    <label>Validation:</label>
    <input type="radio" name="validation" id="valLow">
    <label for="valLow">None</label>
    <input type="radio" name="validation" id="valHigh">
    <label for="valHigh">High</label>
  </div>

  <div class="container">
    <!-- Left side (Main form) -->
    <div class="main">
      <label for="issue">Issue:</label>
      <textarea id="issue" rows="3"></textarea>

      <label for="actions">Actions:</label>
      <textarea id="actions" rows="3"></textarea>

      <label for="next">Next Actions:</label>
      <textarea id="next" rows="3" placeholder="Check if issue resolved"></textarea>

      <div class="checkin-row">
        <input type="checkbox" id="checkin">
        <label for="checkin">#checkin</label>
        <input type="text" id="number" placeholder="Phone number">
      </div>

      <div class="button-row">
        <button onclick="clearAll()">CLEAR</button>
      </div>
    </div>

    <!-- Right side (Extra info) -->
    <div class="extra">
      <label for="extra">Extra Info (not included in notes):</label>
      <textarea id="extra" rows="10" placeholder="Thank you for calling Home Tech in Newcastle. My name is __ and I will be your guide. Can I start by taking your name please?"></textarea>

      <fieldset style="margin-top: 15px;">
        <legend><strong>Reminders</strong></legend>
        <div style="margin: 10px 0;">
          <div class="reminder-row">
            <span class="reminder-label">Bill paid</span>
            <input type="checkbox" id="billPaidCheckbox">
          </div>
          <div class="reminder-row">
            <span class="reminder-label">Fault</span>
            <span class="reminder-sub-label">Open</span>
            <input type="checkbox" id="faultOpenCheckbox">
            <span class="reminder-sub-label">Close</span>
            <input type="checkbox" id="faultCloseCheckbox">
          </div>
          <div class="reminder-row">
            <span class="reminder-label">Complaint</span>
            <span class="reminder-sub-label">Open</span>
            <input type="checkbox" id="complaintOpenCheckbox">
            <span class="reminder-sub-label">Close</span>
            <input type="checkbox" id="complaintCloseCheckbox">
          </div>
        </div>
      </fieldset>

      <fieldset style="margin-top: 15px;">
        <legend><strong>Order of Close</strong></legend>
        <ol style="margin: 10px 0; padding-left: 20px;">
          <li>Albert Flow/I'm Done</li>
          <li>Consumer Interaction Notes</li>
          <li>HomeView/Smart Assistant</li>
          <li>Albert I'm Finished</li>
        </ol>
      </fieldset>
    </div>
  </div>

  <h3>Formatted Note:</h3>
  <div id="output"></div>

  <script>
    const replacements = {
      "cust": "customer", "rtr": "router", "bb": "broadband", "conn": "connection",
      "res": "resolution", "adv": "advised", "chk": "checked", "rep": "replaced",
      "cfg": "configured", "appt": "appointment", "nfa": "no further action",
      "eng": "engineer", "sw": "software", "hw": "hardware", "cx": "customer",
      "escal": "escalated", "rebt": "rebooted", "hc": "home checks completed",
      "sa": "smart assistant"
    };

    const actionsField = document.getElementById('actions');
    const nextField = document.getElementById('next');

    const fieldsToWatch = ['initials', 'issue', 'actions', 'next', 'number'];
    fieldsToWatch.forEach(id => {
      document.getElementById(id).addEventListener('input', updateFormattedNote);
    });

    document.getElementById('checkin').addEventListener('change', updateFormattedNote);
    document.getElementById('valLow').addEventListener('change', updateFormattedNote);
    document.getElementById('valHigh').addEventListener('change', updateFormattedNote);

    function expandShorthand(text) {
      return text.replace(/\b\w+\b/g, word => {
        const lower = word.toLowerCase();
        return replacements[lower] || word;
      });
    }

    function toSentenceCase(text) {
      return text.toLowerCase().replace(/(^\s*\w|[\.\!\?]\s*\w)/g, c => c.toUpperCase());
    }

    function getValidationLabel() {
      if (document.getElementById('valHigh').checked) return "Highly validated";
      if (document.getElementById('valLow').checked) return "Not able to validate";
      return "";
    }

    function updateFormattedNote() {
      const initials = document.getElementById('initials').value.trim() || "GM";
      const rawIssue = document.getElementById('issue').value.trim();
      const rawActions = document.getElementById('actions').value.trim();
      const rawNext = document.getElementById('next').value.trim();

      if (!rawIssue) {
        document.getElementById('output').textContent = '';
        return;
      }

      const issueExpanded = expandShorthand(rawIssue);
      const actionsExpanded = expandShorthand(rawActions);
      const nextExpanded = rawNext || "Check if issue resolved";
      const nextExpandedShorthand = expandShorthand(nextExpanded);

      const issue = toSentenceCase(issueExpanded);
      const actions = toSentenceCase(actionsExpanded);
      const next = toSentenceCase(nextExpandedShorthand);

      const validationLabel = getValidationLabel();
      const validationPrefix = validationLabel ? validationLabel + ". " : "";

      const checkinChecked = document.getElementById('checkin').checked;
      const number = document.getElementById('number').value.trim();

      let note = `${initials}@HomeTech\nIssue - ${issue}`;
      if (actions) {
        note += `\nActions - ${validationPrefix}${actions}`;
      }
      note += `\nNext Actions - ${next}`;
      if (checkinChecked && number) {
        note += `\n#checkin #${number}`;
      }

      document.getElementById('output').textContent = note;
    }

    function clearAll() {
      document.getElementById('issue').value = '';
      actionsField.value = '';
      nextField.value = '';
      document.getElementById('extra').value = '';
      document.getElementById('checkin').checked = false;
      document.getElementById('number').value = '';
      document.getElementById('valHigh').checked = false;
      document.getElementById('valLow').checked = false;
      document.getElementById('billPaidCheckbox').checked = false;
      document.getElementById('faultOpenCheckbox').checked = false;
      document.getElementById('faultCloseCheckbox').checked = false;
      document.getElementById('complaintOpenCheckbox').checked = false;
      document.getElementById('complaintCloseCheckbox').checked = false;
      updateFormattedNote();
    }

    document.getElementById('themeSelect').addEventListener('change', function () {
      const theme = this.value;
      document.body.classList.remove('bt-theme', 'ee-theme');
      document.body.classList.add(`${theme}-theme`);
    });

    window.addEventListener('DOMContentLoaded', () => {
      document.body.classList.add('ee-theme');
    });

    updateFormattedNote();
  </script>
</body>
</html>


